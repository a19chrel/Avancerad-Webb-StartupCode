<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>React Startup Code</title>
  <link rel="stylesheet" href="weatherApp.css">
</head>
<body>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>

<form action="Startup.html" method="get">
  <div class="form-group search">
    <input type="text" class="input" placeholder="search" name="ort">
    <button type="submit"><img src='magnify.svg'></button>
  </div>
</form>

<div id="content">

</div>

<script type="text/babel">

  // React since react V4 does not read query parameters so we read query parameter directly
  const urlParams = new URLSearchParams(window.location.search);
  const ort = urlParams.get('ort');

  if (ort != null) alert(ort);

  //Content element
  class App extends React.Component {
    constructor(props) {
      super(props);
    }
    render() {
      return (
              <ForecastList data={this.props.forecastArr}></ForecastList>
      );
    }
  }

  class ForecastList extends React.Component {
    constructor(props) {
      super(props);
      console.log(props)
    }
    render() {
      const list = this.props.data.map((obj, index) =>
          <ForecastListRow key={index} data={obj}></ForecastListRow>
      );
      return (
              <div>{list}</div>
      );
    }
  }

  class ForecastListRow extends React.Component {
    constructor(props) {
      super(props);
    }
    render() {

      const listRow = Object.keys(this.props.data).map((key) =>
              <div key={key}>{this.props.data[key]}</div>
      );
      return (
              <div>{listRow}</div>
      );
    }
  }

  const forecastArr = [
    {name: "Skövde", startdate: "2020-01-01 00:00:00", enddate: "2020-01-01 06:00:00", periodnr: 0, periodname: "Night", temp: 2, tempUnit: "Celcius", downfalltype: "Snowing", downfallAmount: 30, downfallUnit: "mm", windDirection: "South-East", MPS: 5.1},
    {name: "Skövde", startdate: "2020-01-01 00:00:00", enddate: "2020-01-01 06:00:00", periodnr: 0, periodname: "Night", temp: 2, tempUnit: "Celcius", downfalltype: "Snowing", downfallAmount: 30, downfallUnit: "mm", windDirection: "South-East", MPS: 5.1},
    {name: "Skövde", startdate: "2020-01-01 00:00:00", enddate: "2020-01-01 06:00:00", periodnr: 0, periodname: "Night", temp: 2, tempUnit: "Celcius", downfalltype: "Snowing", downfallAmount: 30, downfallUnit: "mm", windDirection: "South-East", MPS: 5.1},
  ]

  ReactDOM.render(
          <App forecastArr={forecastArr}/>,
          document.getElementById('content')
  );
</script>
</body>
</html>